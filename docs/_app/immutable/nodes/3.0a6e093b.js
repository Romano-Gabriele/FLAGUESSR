import{S as ae,i as le,s as re,k as y,q as H,a as O,l as E,m as T,r as L,h as m,c as S,n as D,b as Y,E as c,L as J,u as ce,K as se,M as fe,y as C,e as ne,z as P,A,g as B,d as F,f as ie,B as G,F as ue,o as me,v as _e}from"../chunks/index.33d1dcae.js";import{F as pe,a as W}from"../chunks/flagname.94d34076.js";import{a as he,u as de}from"../chunks/helper.0790a59b.js";import{u as ge}from"../chunks/auth.d3f5842a.js";import{u as Z}from"../chunks/dbFuncs.f092331a.js";function ve(o){let s,t,l,a,r,n,v,u,b,f,p,w,h,I,V,U;return{c(){s=y("div"),t=y("h2"),l=H("You have lost!"),a=O(),r=y("h2"),n=H("Your score: "),v=H(o[0]),u=O(),b=y("div"),f=y("button"),p=H("Home"),w=O(),h=y("button"),I=H("Retry"),this.h()},l($){s=E($,"DIV",{class:!0});var i=T(s);t=E(i,"H2",{class:!0});var z=T(t);l=L(z,"You have lost!"),z.forEach(m),a=S(i),r=E(i,"H2",{class:!0});var d=T(r);n=L(d,"Your score: "),v=L(d,o[0]),d.forEach(m),u=S(i),b=E(i,"DIV",{class:!0});var N=T(b);f=E(N,"BUTTON",{class:!0});var k=T(f);p=L(k,"Home"),k.forEach(m),w=S(N),h=E(N,"BUTTON",{class:!0});var M=T(h);I=L(M,"Retry"),M.forEach(m),N.forEach(m),i.forEach(m),this.h()},h(){D(t,"class","svelte-8xzzqu"),D(r,"class","svelte-8xzzqu"),D(f,"class","svelte-8xzzqu"),D(h,"class","svelte-8xzzqu"),D(b,"class","buttons svelte-8xzzqu"),D(s,"class","cont svelte-8xzzqu")},m($,i){Y($,s,i),c(s,t),c(t,l),c(s,a),c(s,r),c(r,n),c(r,v),c(s,u),c(s,b),c(b,f),c(f,p),c(b,w),c(b,h),c(h,I),V||(U=[J(f,"click",o[1]),J(h,"click",o[2])],V=!0)},p($,[i]){i&1&&ce(v,$[0])},i:se,o:se,d($){$&&m(s),V=!1,fe(U)}}}function $e(o,s,t){let{score:l}=s;const a=()=>{t(0,l=0),he("/home")},r=()=>{t(0,l=0),window.location.reload()};return o.$$set=n=>{"score"in n&&t(0,l=n.score)},[l,a,r]}class be extends ae{constructor(s){super(),le(this,s,$e,ve,re,{score:0})}}function oe(o){let s,t,l;return t=new be({props:{score:o[3]}}),{c(){s=y("div"),C(t.$$.fragment),this.h()},l(a){s=E(a,"DIV",{class:!0});var r=T(s);P(t.$$.fragment,r),r.forEach(m),this.h()},h(){D(s,"class","popup svelte-nzon3y")},m(a,r){Y(a,s,r),A(t,s,null),l=!0},p(a,r){const n={};r&8&&(n.score=a[3]),t.$set(n)},i(a){l||(B(t.$$.fragment,a),l=!0)},o(a){F(t.$$.fragment,a),l=!1},d(a){a&&m(s),G(t)}}}function ze(o){let s,t,l,a,r,n,v,u,b,f,p,w,h,I,V,U,$,i,z,d,N,k,M,X,x;u=new pe({props:{src:o[1][o[4]]}}),p=new W({props:{name:o[2][0]}}),I=new W({props:{name:o[2][1]}}),$=new W({props:{name:o[2][2]}}),d=new W({props:{name:o[2][3]}});let _=o[0]==1&&oe(o);return{c(){s=y("div"),t=y("div"),l=H("Score: "),a=H(o[3]),r=O(),n=y("div"),v=y("div"),C(u.$$.fragment),b=O(),f=y("button"),C(p.$$.fragment),w=O(),h=y("button"),C(I.$$.fragment),V=O(),U=y("button"),C($.$$.fragment),i=O(),z=y("button"),C(d.$$.fragment),N=O(),_&&_.c(),k=ne(),this.h()},l(e){s=E(e,"DIV",{class:!0});var g=T(s);t=E(g,"DIV",{class:!0});var R=T(t);l=L(R,"Score: "),a=L(R,o[3]),R.forEach(m),g.forEach(m),r=S(e),n=E(e,"DIV",{class:!0});var q=T(n);v=E(q,"DIV",{class:!0});var K=T(v);P(u.$$.fragment,K),K.forEach(m),b=S(q),f=E(q,"BUTTON",{class:!0});var j=T(f);P(p.$$.fragment,j),j.forEach(m),w=S(q),h=E(q,"BUTTON",{class:!0});var Q=T(h);P(I.$$.fragment,Q),Q.forEach(m),V=S(q),U=E(q,"BUTTON",{class:!0});var ee=T(U);P($.$$.fragment,ee),ee.forEach(m),i=S(q),z=E(q,"BUTTON",{class:!0});var te=T(z);P(d.$$.fragment,te),te.forEach(m),q.forEach(m),N=S(e),_&&_.l(e),k=ne(),this.h()},h(){D(t,"class","score svelte-nzon3y"),D(s,"class","score-container svelte-nzon3y"),D(v,"class","flag svelte-nzon3y"),D(f,"class","option top left svelte-nzon3y"),D(h,"class","option top right svelte-nzon3y"),D(U,"class","option left svelte-nzon3y"),D(z,"class","option right svelte-nzon3y"),D(n,"class","container svelte-nzon3y")},m(e,g){Y(e,s,g),c(s,t),c(t,l),c(t,a),Y(e,r,g),Y(e,n,g),c(n,v),A(u,v,null),c(n,b),c(n,f),A(p,f,null),c(n,w),c(n,h),A(I,h,null),c(n,V),c(n,U),A($,U,null),c(n,i),c(n,z),A(d,z,null),Y(e,N,g),_&&_.m(e,g),Y(e,k,g),M=!0,X||(x=[J(f,"click",o[6]),J(h,"click",o[7]),J(U,"click",o[8]),J(z,"click",o[9])],X=!0)},p(e,[g]){(!M||g&8)&&ce(a,e[3]);const R={};g&18&&(R.src=e[1][e[4]]),u.$set(R);const q={};g&4&&(q.name=e[2][0]),p.$set(q);const K={};g&4&&(K.name=e[2][1]),I.$set(K);const j={};g&4&&(j.name=e[2][2]),$.$set(j);const Q={};g&4&&(Q.name=e[2][3]),d.$set(Q),e[0]==1?_?(_.p(e,g),g&1&&B(_,1)):(_=oe(e),_.c(),B(_,1),_.m(k.parentNode,k)):_&&(_e(),F(_,1,1,()=>{_=null}),ie())},i(e){M||(B(u.$$.fragment,e),B(p.$$.fragment,e),B(I.$$.fragment,e),B($.$$.fragment,e),B(d.$$.fragment,e),B(_),M=!0)},o(e){F(u.$$.fragment,e),F(p.$$.fragment,e),F(I.$$.fragment,e),F($.$$.fragment,e),F(d.$$.fragment,e),F(_),M=!1},d(e){e&&m(s),e&&m(r),e&&m(n),G(u),G(p),G(I),G($),G(d),e&&m(N),_&&_.d(e),e&&m(k),X=!1,fe(x)}}}function ke(o,s,t){let l;ue(o,ge,i=>t(13,l=i));let a=[],r=0;me(()=>{const i=sessionStorage.getItem("flags");i&&(a=JSON.parse(i),h())});let n=[],v=[],u=[],b,f=0,p;async function w(i){if(i==b?1:0)t(3,f++,f),h();else{await de(l.uid),console.log("userupdated = ",l);let d=l.played;Z(l.uid,"played",d+1),Z(l.uid,"last",f),f>l.best&&Z(l.uid,"best",f),t(0,r=1),console.log("Game over! Score:",f),console.log(r)}}function h(){t(4,p=Math.trunc(Math.random()*195)),t(1,n=[]),v=[],t(2,u=[]),console.log(p),console.log("score = ",f);function i(z,d){let N;for(let k=0;k<a.length;k++)d==0?N=a[k].URL_ID:N=a[k].nation,z[k]=N;return z}t(1,n=i(n,0)),v=i(v,1),b=v[p],t(2,u=[b,...v.filter((z,d)=>d!==p).sort(()=>.5-Math.random()).slice(0,3)]),t(2,u=u.sort(()=>.5-Math.random()))}return[r,n,u,f,p,w,()=>w(u[0]),()=>w(u[1]),()=>w(u[2]),()=>w(u[3])]}class Ie extends ae{constructor(s){super(),le(this,s,ke,ze,re,{})}}export{Ie as component};
