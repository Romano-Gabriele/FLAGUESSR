import{S as re,i as ce,s as ie,k as E,q as H,a as S,l as T,m as D,r as L,h as u,c as V,n as N,b as Y,E as c,L as J,u as fe,K as se,M as ue,y as C,e as ne,z as P,A,g as O,d as F,f as me,B as G,F as oe,o as _e,N as pe,v as he}from"../chunks/index.e02442de.js";import{F as de,a as W}from"../chunks/flagname.f08f7d02.js";import{a as ge,u as ve}from"../chunks/helper.0f7c7344.js";import{b as $e}from"../chunks/paths.ed4f29bc.js";import{u as be}from"../chunks/auth.91a86db2.js";import{u as Z}from"../chunks/dbFuncs.621dcfd4.js";import{v as ae}from"../chunks/style.1bc5b25e.js";function ze(o){let s,t,a,l,r,n,b,d,i,h,m,I,_,z,M,B;return{c(){s=E("div"),t=E("h2"),a=H("You have lost!"),l=S(),r=E("h2"),n=H("Your score: "),b=H(o[0]),d=S(),i=E("div"),h=E("button"),m=H("Home"),I=S(),_=E("button"),z=H("Retry"),this.h()},l(v){s=T(v,"DIV",{class:!0});var k=D(s);t=T(k,"H2",{class:!0});var f=D(t);a=L(f,"You have lost!"),f.forEach(u),l=V(k),r=T(k,"H2",{class:!0});var $=D(r);n=L($,"Your score: "),b=L($,o[0]),$.forEach(u),d=V(k),i=T(k,"DIV",{class:!0});var y=D(i);h=T(y,"BUTTON",{class:!0});var q=D(h);m=L(q,"Home"),q.forEach(u),I=V(y),_=T(y,"BUTTON",{class:!0});var w=D(_);z=L(w,"Retry"),w.forEach(u),y.forEach(u),k.forEach(u),this.h()},h(){N(t,"class","svelte-8xzzqu"),N(r,"class","svelte-8xzzqu"),N(h,"class","svelte-8xzzqu"),N(_,"class","svelte-8xzzqu"),N(i,"class","buttons svelte-8xzzqu"),N(s,"class","cont svelte-8xzzqu")},m(v,k){Y(v,s,k),c(s,t),c(t,a),c(s,l),c(s,r),c(r,n),c(r,b),c(s,d),c(s,i),c(i,h),c(h,m),c(i,I),c(i,_),c(_,z),M||(B=[J(h,"click",o[1]),J(_,"click",o[2])],M=!0)},p(v,[k]){k&1&&fe(b,v[0])},i:se,o:se,d(v){v&&u(s),M=!1,ue(B)}}}function ke(o,s,t){let{score:a}=s;const l=()=>{t(0,a=0),ge(`${$e}/home`)},r=()=>{t(0,a=0),window.location.reload()};return o.$$set=n=>{"score"in n&&t(0,a=n.score)},[a,l,r]}class ye extends re{constructor(s){super(),ce(this,s,ke,ze,ie,{score:0})}}function le(o){let s,t,a;return t=new ye({props:{score:o[3]}}),{c(){s=E("div"),C(t.$$.fragment),this.h()},l(l){s=T(l,"DIV",{class:!0});var r=D(s);P(t.$$.fragment,r),r.forEach(u),this.h()},h(){N(s,"class","popup svelte-nzon3y")},m(l,r){Y(l,s,r),A(t,s,null),a=!0},p(l,r){const n={};r&8&&(n.score=l[3]),t.$set(n)},i(l){a||(O(t.$$.fragment,l),a=!0)},o(l){F(t.$$.fragment,l),a=!1},d(l){l&&u(s),G(t)}}}function Ee(o){let s,t,a,l,r,n,b,d,i,h,m,I,_,z,M,B,v,k,f,$,y,q,w,X,x;d=new de({props:{src:o[1][o[4]]}}),m=new W({props:{name:o[2][0]}}),z=new W({props:{name:o[2][1]}}),v=new W({props:{name:o[2][2]}}),$=new W({props:{name:o[2][3]}});let p=o[0]==1&&le(o);return{c(){s=E("div"),t=E("div"),a=H("Score: "),l=H(o[3]),r=S(),n=E("div"),b=E("div"),C(d.$$.fragment),i=S(),h=E("button"),C(m.$$.fragment),I=S(),_=E("button"),C(z.$$.fragment),M=S(),B=E("button"),C(v.$$.fragment),k=S(),f=E("button"),C($.$$.fragment),y=S(),p&&p.c(),q=ne(),this.h()},l(e){s=T(e,"DIV",{class:!0});var g=D(s);t=T(g,"DIV",{class:!0});var R=D(t);a=L(R,"Score: "),l=L(R,o[3]),R.forEach(u),g.forEach(u),r=V(e),n=T(e,"DIV",{class:!0});var U=D(n);b=T(U,"DIV",{class:!0});var K=D(b);P(d.$$.fragment,K),K.forEach(u),i=V(U),h=T(U,"BUTTON",{class:!0});var j=D(h);P(m.$$.fragment,j),j.forEach(u),I=V(U),_=T(U,"BUTTON",{class:!0});var Q=D(_);P(z.$$.fragment,Q),Q.forEach(u),M=V(U),B=T(U,"BUTTON",{class:!0});var ee=D(B);P(v.$$.fragment,ee),ee.forEach(u),k=V(U),f=T(U,"BUTTON",{class:!0});var te=D(f);P($.$$.fragment,te),te.forEach(u),U.forEach(u),y=V(e),p&&p.l(e),q=ne(),this.h()},h(){N(t,"class","score svelte-nzon3y"),N(s,"class","score-container svelte-nzon3y"),N(b,"class","flag svelte-nzon3y"),N(h,"class","option top left svelte-nzon3y"),N(_,"class","option top right svelte-nzon3y"),N(B,"class","option left svelte-nzon3y"),N(f,"class","option right svelte-nzon3y"),N(n,"class","container svelte-nzon3y")},m(e,g){Y(e,s,g),c(s,t),c(t,a),c(t,l),Y(e,r,g),Y(e,n,g),c(n,b),A(d,b,null),c(n,i),c(n,h),A(m,h,null),c(n,I),c(n,_),A(z,_,null),c(n,M),c(n,B),A(v,B,null),c(n,k),c(n,f),A($,f,null),Y(e,y,g),p&&p.m(e,g),Y(e,q,g),w=!0,X||(x=[J(h,"click",o[6]),J(_,"click",o[7]),J(B,"click",o[8]),J(f,"click",o[9])],X=!0)},p(e,[g]){(!w||g&8)&&fe(l,e[3]);const R={};g&18&&(R.src=e[1][e[4]]),d.$set(R);const U={};g&4&&(U.name=e[2][0]),m.$set(U);const K={};g&4&&(K.name=e[2][1]),z.$set(K);const j={};g&4&&(j.name=e[2][2]),v.$set(j);const Q={};g&4&&(Q.name=e[2][3]),$.$set(Q),e[0]==1?p?(p.p(e,g),g&1&&O(p,1)):(p=le(e),p.c(),O(p,1),p.m(q.parentNode,q)):p&&(he(),F(p,1,1,()=>{p=null}),me())},i(e){w||(O(d.$$.fragment,e),O(m.$$.fragment,e),O(z.$$.fragment,e),O(v.$$.fragment,e),O($.$$.fragment,e),O(p),w=!0)},o(e){F(d.$$.fragment,e),F(m.$$.fragment,e),F(z.$$.fragment,e),F(v.$$.fragment,e),F($.$$.fragment,e),F(p),w=!1},d(e){e&&u(s),e&&u(r),e&&u(n),G(d),G(m),G(z),G(v),G($),e&&u(y),p&&p.d(e),e&&u(q),X=!1,ue(x)}}}function Te(o,s,t){let a,l;oe(o,be,f=>t(13,a=f)),oe(o,ae,f=>t(14,l=f));let r=[],n=0;_e(()=>{setTimeout(()=>pe(ae,l=!0,l),250);const f=sessionStorage.getItem("flags");f&&(r=JSON.parse(f),z())});let b=[],d=[],i=[],h,m=0,I;async function _(f){if(f==h?1:0)t(3,m++,m),z();else{await ve(a.uid),console.log("userupdated = ",a);let y=a.played;Z(a.uid,"played",y+1),Z(a.uid,"last",m),m>a.best&&Z(a.uid,"best",m),t(0,n=1),console.log("Game over! Score:",m),console.log(n)}}function z(){t(4,I=Math.trunc(Math.random()*195)),t(1,b=[]),d=[],t(2,i=[]),console.log(I),console.log("score = ",m);function f($,y){let q;for(let w=0;w<r.length;w++)y==0?q=r[w].URL_ID:q=r[w].nation,$[w]=q;return $}t(1,b=f(b,0)),d=f(d,1),h=d[I],t(2,i=[h,...d.filter(($,y)=>y!==I).sort(()=>.5-Math.random()).slice(0,3)]),t(2,i=i.sort(()=>.5-Math.random()))}return[n,b,i,m,I,_,()=>_(i[0]),()=>_(i[1]),()=>_(i[2]),()=>_(i[3])]}class Oe extends re{constructor(s){super(),ce(this,s,Te,Ee,ie,{})}}export{Oe as component};
